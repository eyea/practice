<!DOCTYPE html5>
<html>
 <head>
  <title>Canvas</title>
  <style>
  body{padding:10px;}
  canvas{border:1px solid #aaa; margin-left:10px}
  </style>
 </head>
 <body>
	<canvas id="canvas" width="710" height="200">您的浏览器不支持canvas。</canvas>
	<script>
	var dw = document.querySelector("#canvas").getContext("2d");
	var img = new Image();
		img.src = "mm.jpg";
		//加载完毕之后
		img.onload = function(){
			dw.drawImage(img,0,0,355,200);
			var imgData = dw.getImageData(0,0,355,200);
			var px = imgData.data;
			for(var i=0,n=px.length;i<n;i+=4){
				var v = px[i]*0.2+px[i+1]*0.1+px[i+2]*0.9;
				  px[i]= v;
				  px[i+1]=v;
				  px[i+2]=v;
			  }
			  dw.putImageData(imgData,355,0);
		}
	</script>
 </body>
</html>